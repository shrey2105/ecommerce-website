{% extends 'shopping/basic.html' %}

{% block title %}Order Details{% endblock %}
{% block css %}
.result {display: block; clear: both; vertical-align: middle; position: relative;}
.display-box {position: relative;width: 100%;max-width: 500px;background-color: #fff;border: 4px solid #000;padding:
40px 20px;margin: 50px auto;line-height: 30px;display: block;clear: both;}
.display-box p a {color: #000; font-weight: 600; text-decoration: underline;}
.display-box h2 {color: #000;font-size: 22px;text-align: center;margin-bottom: 20px;display: block;font-weight:
600;text-transform: uppercase;font-family: lato;}
.display-box p {color: #000;font-size: 14px;text-align: center;display: block;}
a.review-link:link {color:#6C757D;}
a.review-link:visited {color:#6C757D;}
a.review-link:hover {font-size:150%;}
{% endblock %}
{% block shopactive %}active{% endblock shopactive %}
{% block body %}
{% load literal_eval %}
<div class="container">
    {{empty}}
    {% if empty %}
    <div class="result">
        <div class="display-box">
            <h2>NO ORDERS YET</h2>
            <p>You have no ordered anything yet.</p>
            <p>You need to order to see order details.</p>
            <p>Click <a href="/shop/">here</a> to continue shopping.</p>
        </div>
    </div>

    {% else %}

    <h1 class="order-detail-title mt-4">Order Details</h1><br>
    <div class="table-responsive">
        <h5 class="cart-details">
            <table class="table">
                <thead>
                    <th scope="col">Order ID</th>
                    <th scope="col"></th>
                    <th scope="col">Product</th>
                    <th scope="col">Quantity</th>
                    <th scope="col">Review</th>
                    <th scope="col">Price</th>
                    <th scope="col"></th>
                </thead>
                {% for item in order %}

                <tr>
                    <td scope="col">{{item.order_id}}</td>
                    <td scope="col">
                        {% for image in item.cartproduct_items|literal_eval %}
                        <img src="{{MEDIA_URL}}{{image.3}}" height="40" width="40" alt="..."><br><br>
                        {% endfor %}
                    </td>
                    <td scope="col">
                        {% for product in item.cartproduct_items|literal_eval %}
                        {{forloop.counter}}. {{product.0|truncatechars:20}}<br><br><br>
                        {% endfor %}
                    </td>
                    <td scope="col">
                        {% for quantity in item.cartproduct_items|literal_eval %}
                        {{quantity.1}}<br><br><br>
                        {% endfor %}
                    </td>
                    <td scope="col">
                        {% for url in item.cartproduct_items|literal_eval %}
                        <a class="review-link" href="/shop/review/{{url.2}}">Rate &amp; Review</a><br><br><br>
                        {% endfor %}
                    </td>
                    <td scope="col">Rs. {{item.final_total}}</td>
                </tr>
                {% endfor %}
            </table>
        </h5>
    </div>
    {% endif %}
</div>
{% endblock body %}